(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{651:function(e,t,n){"use strict";n(55),n(33);var r={name:"MovieAdd",components:{MoviesTable:n(625).default},props:{repos:Object,existingMovies:Array},data:function(){return{selected:[],loading:!1}},methods:{submit:function(){this.$emit("submit",this.$refs.searchTable.selected.map((function(e){return{name:e.name}})))}}},o=n(53),c=n(65),l=n.n(c),v=n(106),d=n(109),m=n(54),f=n(619),h=n(617),_=n(593),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"dialog-card"},[n("v-card-title",[e._v("Add New Movie")]),e._v(" "),n("v-container",[n("v-row",{attrs:{justify:"center"}}),e._v(" "),n("v-row",{attrs:{justify:"center"}},[n("movies-table",{ref:"searchTable",attrs:{"existing-movies":e.existingMovies,repos:e.repos}})],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"secondary",outlined:""},on:{click:function(t){return e.$emit("submit",!1)}}},[e._v("Cancel")]),e._v(" "),n("v-btn",{attrs:{color:"success"},on:{click:e.submit}},[e._v("Add")])],1)],1)}),[],!1,null,"b7511368",null);t.a=component.exports;l()(component,{MoviesTable:n(625).default}),l()(component,{VBtn:v.a,VCard:d.a,VCardActions:m.a,VCardTitle:m.c,VContainer:f.a,VRow:h.a,VSpacer:_.a})},718:function(e,t,n){"use strict";n.r(t);n(213),n(8),n(55),n(214),n(33),n(21),n(56),n(9),n(58),n(82);var r=n(19),o={name:"MovieDelete",props:{title:Object|Array}},c=n(53),l=n(65),v=n.n(l),d=n(106),m=n(109),f=n(54),h=n(593),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"dialog-card"},[n("v-card-title",[e._v("Delete Movie")]),e._v(" "),n("v-card-text",[e._v("Are you sure you want to delete "+e._s(Array.isArray(e.title)?"these Movies":"this Movie")+"?")]),e._v(" "),Array.isArray(e.title)?n("v-card-text",[e._l(e.title,(function(t){return[e._v("\n      "+e._s(t)),n("br")]}))],2):n("v-card-text",[e._v("\n    "+e._s(e.title)+"\n  ")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"secondary",outlined:""},on:{click:function(t){return e.$emit("submit",!1)}}},[e._v("Cancel")]),e._v(" "),n("v-btn",{attrs:{color:"error"},on:{click:function(t){return e.$emit("submit",!0)}}},[e._v("Delete")])],1)],1)}),[],!1,null,"079c6ad1",null),_=component.exports;v()(component,{VBtn:d.a,VCard:m.a,VCardActions:f.a,VCardText:f.b,VCardTitle:f.c,VSpacer:h.a});var x=n(651),w=n(99),M={name:"MovieDelete",props:{movie:String}},y=Object(c.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"dialog-card"},[n("v-card-title",[e._v("Delete Movie")]),e._v(" "),n("v-card-text",[e._v("Are you sure you want to delete "+e._s(Array.isArray(e.title)?"these Movies":"this Movie")+"?")]),e._v(" "),Array.isArray(e.title)?n("v-card-text",[e._l(e.title,(function(t){return[e._v("\n      "+e._s(t)),n("br")]}))],2):n("v-card-text",[e._v("\n    "+e._s(e.title)+"\n  ")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"secondary",outlined:""},on:{click:function(t){return e.$emit("submit",!1)}}},[e._v("Cancel")]),e._v(" "),n("v-btn",{attrs:{color:"error"},on:{click:function(t){return e.$emit("submit",!0)}}},[e._v("Delete")])],1)],1)}),[],!1,null,"67e7d11b",null),A=y.exports;v()(y,{VBtn:d.a,VCard:m.a,VCardActions:f.a,VCardText:f.b,VCardTitle:f.c,VSpacer:h.a});var $={name:"movies",components:{MoviesTable:n(625).default},data:function(){return{movies:[],loading:!0}},fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$repos.movies.all();case 2:e.movies=t.sent,e.movies.forEach((function(e,t){e.idx=t,e.exists=!0})),console.log("movies",e.movies),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},methods:{editMovie:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$dialog.showAndWait(A,{movie:e});case 2:!1!==(r=n.sent)&&(t.loading=!0,t.$repos.movies.update(r).then((function(n){n.idx=e.idx,t.movies[n.idx]=n,t.$dialog.message.success("Movies succesfully updated!",{position:"bottom-left",timeout:3e3}),console.debug("Updated",r),t.loading=!1})));case 4:case"end":return n.stop()}}),n)})))()},deleteSelected:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=1===e.length?e[0].name:e.map((function(e){return e.name})),n.next=3,t.$dialog.showAndWait(_,{title:r});case 3:!0===n.sent&&(t.loading=!0,o=[],e.forEach((function(e){o.push(t.$repos.movies.remove(e.movId).then((function(t){return e.idx})))})),Promise.all(o).then((function(e){e.forEach((function(e){t.movies.splice(t.movies.findIndex((function(t){return t.idx===e})),1)})),w.a.initIndex(t.movies),t.$dialog.message.success("Movies succesfully removed!",{position:"bottom-left",timeout:3e3}),t.loading=!1})));case 5:case"end":return n.stop()}}),n)})))()},addMovie:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$dialog.showAndWait(x.a,{width:"620",repos:e.$repos,existingMovies:e.movies});case 2:n=t.sent,console.log("newMovies",n),n&&!1!==n&&(e.loading=!0,r=[],n.forEach((function(t){r.push(e.$repos.movies.add(t).then((function(t){return e.movies.push(t),t})))})),Promise.all(r).then((function(t){e.$dialog.message.success("Movies succesfully added!",{position:"bottom-left",timeout:3e3}),console.debug("Added",t),e.loading=!1})));case 5:case"end":return t.stop()}}),t)})))()}},head:function(){return{title:"Admin Movies"}}},V=n(613),C=n(619),j=n(617),k=Object(c.a)($,(function(){var e=this.$createElement,t=this._self._c||e;return t("v-container",[t("v-row",{attrs:{justify:"center"}},[t("h4",[this._v("Movies Dashboard")])]),this._v(" "),t("v-row",{attrs:{justify:"center"}},[t("v-col",{attrs:{cols:"12",md:"10"}},[t("movies-table",{attrs:{"existing-movies":this.movies,"no-tmdb":"",large:"","can-delete":"","can-add":"","show-details":"",repos:this.$repos},on:{delete:this.deleteSelected,add:this.addMovie}})],1)],1)],1)}),[],!1,null,"59708396",null);t.default=k.exports;v()(k,{MoviesTable:n(625).default}),v()(k,{VCol:V.a,VContainer:C.a,VRow:j.a})}}]);