(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{620:function(e,t,r){var content=r(627);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(14).default)("47784bc8",content,!0,{sourceMap:!1})},621:function(e,t,r){var content=r(629);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(14).default)("e030b244",content,!0,{sourceMap:!1})},623:function(e,t,r){"use strict";r.r(t);r(18),r(82);var o=r(19),n=r(624),c=(r(216),r(217)),l={name:"TrailerDialog",components:{VueYoutube:r.n(c).a},props:{trailerUrl:String},data:function(){return{videoId:this.trailerUrl}}},d=r(53),v=Object(d.a)(l,(function(){var e=this.$createElement;return(this._self._c||e)("youtube",{ref:"youtube",attrs:{"video-id":this.videoId,"player-vars":{autoplay:1}}})}),[],!1,null,"2245a451",null).exports,f={name:"MovieCard",components:{ShowsView:n.default},props:{movie:{movId:Number,name:String,posterUrl:String,director:String,description:String},small:Boolean,shows:Array,showView:Boolean,noLink:Boolean,transparent:Boolean,loading:Boolean},methods:{openTrailer:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$repos.movies.trailer(e);case 2:return o=r.sent,console.log(o),r.next=6,t.$dialog.showAndWait(v,{trailerUrl:o,width:"630"}).then((function(e){return e}));case 6:n=r.sent,console.log("trailer",n);case 8:case"end":return r.stop()}}),r)})))()}}},h=(r(628),r(65)),m=r.n(h),w=r(106),_=r(613),k=r(130),y=r(170),S=r(127),x=r(207),V=r(93),C=r(617),I=r(640),T=r(593),$=Object(d.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.loading?r("v-skeleton-loader",{attrs:{type:"card",loading:""}}):r("div",[r("v-list-item",{class:{"elevation-2":!e.transparent,"rounded-lg":!0,"card-wrapper":!e.noLink,"card-wrapper-noHover":!0===e.noLink,"pa-0":!0,"m-0":!0},attrs:{"three-line":"",to:e.noLink?null:"/movies/"+e.movie.movId}},[r("v-list-item-avatar",{class:{"ma-0":!0,"pa-0":!0,"mr-4":!0,"card-avatar":!0===e.noLink},attrs:{rounded:"0",height:!0===e.small?180:370,width:!0===e.small?120:240,"max-height":"370","max-width":"240",horizontal:""}},[r("v-img",{class:{"card-img":!0,"rounded-l-lg":!e.small},staticStyle:{height:"100%!important"},attrs:{src:e.movie.posterUrl}})],1),e._v(" "),r("v-list-item-content",{staticClass:"movie-details"},[r("v-list-item-title",{staticClass:"movie-title"},[e._v(e._s(e.movie.name))]),e._v(" "),r("v-list-item-subtitle",{staticClass:"post-description"},[e._v(e._s(e.movie.description))]),e._v(" "),r("v-row",{attrs:{justify:"start"}},[e.showView?r("shows-view",{attrs:{loading:e.loading,shows:e.shows,"mov-id":e.movie.movId}}):e._e()],1),e._v(" "),r("v-list-item-title",{staticClass:"post-author"},[r("v-row",{attrs:{dense:"","no-gutters":"",justify:"space-between"}},[r("v-col",{attrs:{cols:"9"}},[e._v("\n            Directed by "+e._s(e.movie.director)+"\n          ")]),e._v(" "),r("v-spacer"),e._v(" "),!0!==e.noLink?r("v-col",[r("v-btn",{attrs:{icon:""},on:{click:function(t){return t.preventDefault(),e.openTrailer(e.movie.movId)}}},[r("v-icon",[e._v("fas fa-video")])],1)],1):e._e()],1)],1)],1)],1)],1)}),[],!1,null,"aea1e1d6",null);t.default=$.exports;m()($,{ShowsView:r(624).default}),m()($,{VBtn:w.a,VCol:_.a,VIcon:k.a,VImg:y.a,VListItem:S.a,VListItemAvatar:x.a,VListItemContent:V.a,VListItemSubtitle:V.b,VListItemTitle:V.c,VRow:C.a,VSkeletonLoader:I.a,VSpacer:T.a})},624:function(e,t,r){"use strict";r.r(t);r(24),r(18);var o=r(99),n={name:"ShowsView",props:{shows:Array,movId:Number,loading:Boolean},computed:{days:{get:function(){var e=o.a.groupByDay(this.shows);return console.log("DAYS",e),e}}},methods:{goToShow:function(e){this.$router.push("/movies/".concat(this.movId,"/shows/").concat(e.showId))}}},c=(r(626),r(53)),l=r(65),d=r.n(l),v=r(617),f=r(669),h=r(640),component=Object(c.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{overflow:"hidden"}},[e.loading?r("v-skeleton-loader",{attrs:{type:"table"}}):r("v-simple-table",{staticClass:"shows-table",attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[r("thead",[r("tr",e._l(e.days,(function(t,o){return r("th",{staticStyle:{width:"30px!important"}},[e._v("\n          "+e._s(e._f("formatDateName")(o))+"\n        ")])})),0)]),e._v(" "),r("tbody",[r("tr",e._l(e.days,(function(t){return r("td",e._l(t,(function(t){return r("v-row",{attrs:{dense:"",justify:"start",align:"start"}},[r("div",{staticClass:"show-item",on:{click:function(r){return e.goToShow(t)}}},[r("p",[e._v("\n                "+e._s(e._f("formatTime")(t.date))+"\n              ")])])])})),1)})),0)])]},proxy:!0}])})],1)}),[],!1,null,"c77b6cdc",null);t.default=component.exports;d()(component,{VRow:v.a,VSimpleTable:f.a,VSkeletonLoader:h.a})},626:function(e,t,r){"use strict";var o=r(620);r.n(o).a},627:function(e,t,r){(t=r(13)(!1)).push([e.i,".v-data-table tbody tr[data-v-c77b6cdc]:hover:not(.v-data-table__expanded__content){background:transparent!important}.show-item[data-v-c77b6cdc]{width:6em;height:2em;text-align:center;background-color:rgba(199,57,57,.3);margin-bottom:.1rem}.show-item[data-v-c77b6cdc]:hover{cursor:pointer;background-color:rgba(199,57,57,.6)}.show-item p[data-v-c77b6cdc]{color:#600}",""]),e.exports=t},628:function(e,t,r){"use strict";var o=r(621);r.n(o).a},629:function(e,t,r){(t=r(13)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Roboto:400,700);"]),t.push([e.i,"*[data-v-aea1e1d6],[data-v-aea1e1d6]:after,[data-v-aea1e1d6]:before{box-sizing:border-box}.movie-card[data-v-aea1e1d6]{display:flex;flex-direction:row;background:#fff;box-shadow:0 .1875rem 1.5rem rgba(0,0,0,.2);border-radius:.375rem;overflow:hidden}.transparent-card[data-v-aea1e1d6]{background:transparent;box-shadow:none;border-radius:0}.card-wrapper[data-v-aea1e1d6]{background:#fff}.card-wrapper[data-v-aea1e1d6]:hover{cursor:pointer}.card-wrapper:hover .movie-title[data-v-aea1e1d6]{transition:color .3s ease;color:#e04f62}.card-wrapper:hover .card-img[data-v-aea1e1d6]{transition:opacity .3s ease;opacity:.75}.card-avatar[data-v-aea1e1d6]{transition:width 1s}.card-wrapper-noHover:hover *[data-v-aea1e1d6]{cursor:auto}.card-wrapper-noHover[data-v-aea1e1d6]:hover{background:#fff}.movie-title[data-v-aea1e1d6]{display:inline-block;text-transform:uppercase;letter-spacing:.0625rem;padding:0 0 .25rem;border-bottom:.125rem solid #ebebeb;transition:color .3s ease;font-size:1.125rem;line-height:1.4;color:#121212;font-weight:700;margin:0 0 .5rem}.post-author[data-v-aea1e1d6]{font-size:.875rem;line-height:1;margin:1.125rem 0 0;padding:1.125rem 0 0;border-top:.0625rem solid #ebebeb}",""]),e.exports=t},650:function(e,t,r){var content=r(711);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(14).default)("26f31329",content,!0,{sourceMap:!1})},658:function(e,t,r){"use strict";r.r(t);r(11),r(70),r(76),r(8),r(68),r(39),r(33),r(18),r(21),r(29),r(56),r(9),r(58);function o(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,d=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){d=!0,c=e},f:function(){try{l||null==r.return||r.return()}finally{if(d)throw c}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var c={name:"ShowCard",components:{SeatsView:r(659).default},props:{show:Object,booking:Boolean,takenSeats:Array},data:function(){for(var e=[],t=0;t<10;t++){for(var r=[],col=0;col<16;col++)r.push(0);e.push(r)}return{initialSeats:e,ticketTypes:[{value:"ADULT",price:7,icon:"fas fa-user",amount:0},{value:"Child",price:5.5,icon:"fas fa-child",amount:0},{value:"STUDENT",price:6,icon:"fas fa-graduate",amount:0},{value:"DISABLED",price:5.5,icon:"fas fa-wheelchair",amount:0}]}},methods:{onSeatClick:function(e){var t=e.rowIdx,r=e.colIdx,n=this.seats[t].slice(0);if(0===n[r])n[r]=2,this.ticketTypes[0].amount++;else if(2===n[r]){n[r]=0;var c,l=o(this.ticketTypes);try{for(l.s();!(c=l.n()).done;){var d=c.value;if(d.amount>0){d.amount--;break}}}catch(e){l.e(e)}finally{l.f()}}this.$set(this.initialSeats,t,n)},onTicketInput:function(e,input){var t=this.ticketTypes[e];if(console.log(this.selectionSum(),this.selection.length),this.selectionSum()>this.selection.length){var r,n=o(this.ticketTypes);try{for(n.s();!(r=n.n()).done;){var c=r.value;if(c.amount>0&&t.value!==c.value){c.amount--,console.log("decrease",c);break}}}catch(e){n.e(e)}finally{n.f()}for(console.log(this.selectionSum(),this.selection.length);this.selectionSum()>this.selection.length;)t.amount--;console.log("end",this.selectionSum(),this.selection.length),console.log(this.ticketTypes)}},selectionSum:function(){var e=0;return this.ticketTypes.forEach((function(t){return e+=Number(t.amount)})),e}},computed:{selection:{get:function(){var e=[];return this.seats.forEach((function(t,r){t.forEach((function(t,o){2===t&&e.push({rowIdx:r,colIdx:o})}))})),e}},seats:{get:function(){var e=this.initialSeats.slice();return this.takenSeats.forEach((function(t){e[Math.floor(t.number/16)][t.number%16]=1})),e}}}},l=r(53),d=r(65),v=r.n(d),f=r(106),h=r(109),m=r(54),w=r(613),_=r(619),k=r(203),y=r(617),S=r(640),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.show?r("v-card",{attrs:{elevation:"2",rounded:"",width:"9000"}},[r("v-card-title",[e._v(" Reservation for "+e._s(e._f("formatDateTime")(e.show.date)))]),e._v(" "),r("v-card-text",[r("v-container",[r("v-row",[e._v("\n        Please select seats for your reservation\n      ")]),e._v(" "),r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"12"}},[r("seats-view",{attrs:{disabled:e.booking,seats:e.seats},on:{seatClick:e.onSeatClick}})],1)],1),e._v(" "),r("v-row",[e._v("\n          Selected:\n          "+e._s(e.selection.length)+" Seats\n      ")])],1)],1),e._v(" "),r("v-card-actions",[r("v-btn",{staticClass:"btn-uppercase",attrs:{color:"success",disabled:e.booking||e.selection.length<1},on:{click:function(t){return e.$emit("submit",e.selection)}}},[e.booking?r("v-progress-circular",{attrs:{indeterminate:"",size:20}}):e._e(),e._v("\n      Book\n    ")],1)],1)],1):r("v-skeleton-loader",{attrs:{type:"card, card-image",width:"1000"}})}),[],!1,null,"3cfd72df",null);t.default=component.exports;v()(component,{SeatsView:r(659).default}),v()(component,{VBtn:f.a,VCard:h.a,VCardActions:m.a,VCardText:m.b,VCardTitle:m.c,VCol:w.a,VContainer:_.a,VProgressCircular:k.a,VRow:y.a,VSkeletonLoader:S.a})},659:function(e,t,r){"use strict";r.r(t);var o={name:"SeatsView",props:{seats:Array,disabled:Boolean}},n=(r(710),r(53)),c=r(65),l=r.n(c),d=r(613),v=r(619),f=r(617),component=Object(n.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"pa-0 ma-0",staticStyle:{width:"fit-content"}},e._l(e.seats,(function(t,o){return r("v-row",{key:"seatRow"+o,attrs:{dense:"",justify:"start"}},e._l(t,(function(col,n){return r("v-col",{key:"seat"+(o*t.length+n)},[r("div",{class:{seat:!0,selected:2===col,taken:1===col,disabled:e.disabled},on:{click:function(t){return e.$emit("seatClick",{rowIdx:o,colIdx:n})}}})])})),1)})),1)}),[],!1,null,"27395402",null);t.default=component.exports;l()(component,{VCol:d.a,VContainer:v.a,VRow:f.a})},710:function(e,t,r){"use strict";var o=r(650);r.n(o).a},711:function(e,t,r){(t=r(13)(!1)).push([e.i,".seat[data-v-27395402]{width:1.1rem;height:1.3rem;border-top-left-radius:25%;border-top-right-radius:25%;background-color:grey}.seat[data-v-27395402]:hover{cursor:pointer;transition:color .5s ease;background-color:#b3ffb3}.selected[data-v-27395402]{background-color:green}.disabled[data-v-27395402]{pointer-events:none;opacity:.5}.taken[data-v-27395402],.taken[data-v-27395402]:hover{background-color:red}.taken[data-v-27395402]:hover{cursor:auto}",""]),e.exports=t},723:function(e,t,r){"use strict";r.r(t);r(55),r(33),r(82);var o=r(19),n=r(623),c=r(658),l={props:{reservation:Object,showDetails:Object}},d=r(53),v=r(65),f=r.n(v),h=r(106),m=r(109),w=r(54),_=r(593),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"dialog-card"},[r("v-card-title",[e._v("Reservation Success")]),e._v(" "),r("v-card-text",[r("b",[e._v("Movie:")]),e._v(" "+e._s(e.showDetails.movieTitle)),r("br"),e._v(" "),r("b",[e._v("Date:")]),e._v(" "+e._s(e._f("formatDateTime")(e.showDetails.date))),r("br"),e._v(" "),r("b",[e._v("Total Sum:")]),e._v(" "+e._s(e.reservation.totalSum)+" $\n  ")]),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"success",elevation:"0"},on:{click:function(t){e.$router.push("/users/me/reservations/"+e.reservation.resId),e.$emit("submit",!0)}}},[e._v("\n      To my Reservation\n    ")])],1)],1)}),[],!1,null,null,null),k=component.exports;f()(component,{VBtn:h.a,VCard:m.a,VCardActions:w.a,VCardText:w.b,VCardTitle:w.c,VSpacer:_.a});var y={name:"ShowDetails",components:{ShowCard:c.default,MovieCard:n.default},beforeCreate:function(){this.loading=!0},data:function(){return{show:null,movie:null,takenSeats:[],booking:!1,loading:!0}},fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$repos.shows.id(e.$route.params.showId);case 2:return e.show=t.sent,e.show.date=new Date(e.show.date),t.next=6,e.$repos.movies.id(e.show.movId);case 6:return e.movie=t.sent,t.next=9,e.$repos.seats.allOfShow(e.show.showId);case 9:e.takenSeats=t.sent,e.loading=!1;case 11:case"end":return t.stop()}}),t)})))()},methods:{submitSelection:function(e){var t=this;this.$auth.loggedIn?this.makeReservation(e):this.$events.$emit("showLogin",(function(){return t.makeReservation(e)}))},makeReservation:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.booking=!0,console.log("Reservation",t.$auth.user,e),n={show_id:t.show.showId,seats:e.map((function(e){return{number:16*e.rowIdx+e.colIdx,type:"ADULT"}}))},r.abrupt("return",t.$repos.reservations.add(n).then(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$repos.seats.allOfShow(t.show.showId);case 2:return t.takenSeats=e.sent,t.booking=!1,t.showReservationSuccess(r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return r.stop()}}),r)})))()},showReservationSuccess:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$dialog.showAndWait(k,{reservation:e,showDetails:{date:t.show.date,movieTitle:t.movie.name}}).then((function(e){return e}));case 2:if(r.sent){r.next=5;break}throw null;case 5:return r.abrupt("return");case 6:case"end":return r.stop()}}),r)})))()}},head:function(){return{title:this.movie?this.movie.name:""}}},S=r(613),x=r(619),V=r(617),C=Object(d.a)(y,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-row",[r("v-col",[r("movie-card",{attrs:{loading:e.loading,movie:e.movie,"no-link":""}})],1)],1),e._v(" "),r("v-row",[r("v-spacer"),e._v(" "),e.loading?e._e():r("v-col",[r("show-card",{attrs:{show:e.show,"taken-seats":e.takenSeats,booking:e.booking},on:{submit:e.submitSelection}})],1),e._v(" "),r("v-spacer")],1)],1)}),[],!1,null,"75418d40",null);t.default=C.exports;f()(C,{MovieCard:r(623).default,ShowCard:r(658).default}),f()(C,{VCol:S.a,VContainer:x.a,VRow:V.a,VSpacer:_.a})}}]);